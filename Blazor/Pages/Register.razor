@page "/v1/Users"
@using Blazor.Data.Models
@using Blazor.Data.Services
@using Blazor.Data.Services.Base
@using Blazor.Data.Services.Interfaces
@inject IUsersService _usersService

<div class="row">
    <div class="col-5 shadow-lg p-5 border m-2 border-opacity-25 bg-light bg-gradient">
        <h2 class="text-center mb-3">User Register</h2>
            <EditForm Model="@userRequest" > 
                <p>
                <div class="input-group mb-3">
                    <span class="text-addon2" id="basic-addon2">Email</span>
                    <input type="email" class="form-control" @bind="userRequest.Email"/>
                </div>
                </p>
                <p>
                <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon2">Password</span>
                    <input type="password" class="form-control" @bind="userRequest.Password"/>
                </div>
                </p>
                <p>
                <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon2">Username</span>
                    <input type="text" class="form-control" @bind="userRequest.UserName"/>
                </div>
                </p>
                <p>
                <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon2">Full name</span>
                    <input type="text" class="form-control"  @bind="userRequest.FullName"/>
                </div>
                </p>
                <button class="btn btn-outline-dark"  @onclick="OnCancelClick" >Register</button> <button class="btn btn-outline-dark"
                    >Cancel</button>
            </EditForm>

    </div>
</div>

@code {
    private CreateUser userRequest= new();
    private string OperationStatus = "";

    public async Task OnCancelClick()
    {
        Console.WriteLine("My REgister User");
        Console.WriteLine(userRequest.FullName);
        Console.WriteLine(userRequest.UserName);
        Console.WriteLine(userRequest);

        var response = await _usersService.RegisterUserAsync(userRequest);;
        StateHasChanged();
    }
}
