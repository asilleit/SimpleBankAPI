@page "/login"
@using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage
@using Blazor.Data.Models
@using Blazor.Data.Services
@using Blazor.Data.Services.Base
@using Blazor.Data.Services.Interfaces
@inject IUsersService _usersService
@inject ProtectedLocalStorage _localStorage

<div class="row">
    <div class="col-5 shadow-lg p-5 border m-2 border-opacity-25 bg-light bg-gradient">

        <h2 class="text-center mb-3">Login</h2>
        <EditForm Model="@loginUser" OnSubmit="@SubmitForm">
            <p>
            <div class="input-group mb-3">
                <span class="input-group-text" id="basic-addon2">Username</span>
                <input type="text" class="form-control" @bind="loginUser.Username" />
            </div>
            </p>
            <p>
            <div class="input-group mb-3">
                <span class="input-group-text" id="basic-addon2">Password</span>
                <input type="password" class="form-control" @bind="loginUser.Password" />
            </div>
            </p>
            <button class="btn btn-outline-dark" type="submit">Login</button> <button
                class="btn btn-outline-dark">Cancel</button>

        </EditForm>
    </div>
</div>


@code {
    public User loginUser { get; set; } = new();
    private (bool, LoginUserResponse?, string?) response;

    public async Task SubmitForm()
    {
        response = await _usersService.LoginAsync(loginUser);
        StateHasChanged();
    }
}